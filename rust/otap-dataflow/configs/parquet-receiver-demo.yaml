settings:
  default_pipeline_ctrl_msg_channel_size: 100
  default_node_ctrl_msg_channel_size: 100
  default_pdata_channel_size: 100

nodes:
  # Parquet receiver node
  parquet_receiver:
    kind: receiver
    plugin_urn: "urn:otel:otap:parquet:receiver"
    out_ports:
      out_port:
        destinations:
          - debug_processor
        dispatch_strategy: round_robin
    config:
      # Base directory containing parquet files generated by exporter
      base_uri: "/home/jmacd/src/otel/otel-arrow-tail-sampler/rust/otap-dataflow/output_parquet_files"
      # Signal types to process
      signal_types: ["logs"]
      # How often to scan for new files
      polling_interval: "5s"
      # Processing options
      processing_options:
        batch_size: 1000
        # Wait 10 seconds before processing files (ensures they're complete)
        min_file_age: "10s"
        # Enable validation for debugging
        validate_relations: false
  
  # Debug processor to show the reconstructed data
  debug_processor:
    kind: processor
    plugin_urn: "urn:otel:debug:processor"
    out_ports:
      out_port:
        destinations:
          - noop_exporter
        dispatch_strategy: round_robin
    config:
      verbosity: basic

  # NoOp exporter to act as a sink
  noop_exporter:
    kind: exporter
    plugin_urn: "urn:otel:noop:exporter"
    config: {}
